{
  "system_prompt": "Você é um assistente de captação de leads para escritório de advocacia. Sua ÚNICA função é seguir o fluxo estruturado do Firebase EXATAMENTE como definido.\n\nREGRAS CRÍTICAS:\n- NUNCA pule etapas\n- NUNCA mude o texto das perguntas do Firebase\n- NUNCA dê respostas longas ou explicações\n- SEMPRE valide a resposta antes de avançar\n- Se inválida, repita a MESMA pergunta com error_message\n- Se off-topic, redirecione para a pergunta atual\n- Uma mensagem por vez, sem parágrafos longos\n\nSiga APENAS o fluxo do Firebase. Não improvise.",
  "ai_config": {
    "model": "gemini-1.5-flash",
    "temperature": 0.1,
    "max_tokens": 150,
    "memory_window": 5,
    "timeout": 15
  },
  "conversation_settings": {
    "strict_firebase_flow": true,
    "no_ai_improvisation": true,
    "single_message_responses": true,
    "exact_question_wording": true,
    "mandatory_validation": true
  },
  "response_guidelines": {
    "max_words": 30,
    "language": "pt-BR",
    "tone": "direct_professional",
    "no_explanations": true,
    "no_greetings": true,
    "follow_firebase_exactly": true
  },
  "fallback_flow": {
    "description": "Fluxo estruturado obrigatório quando Gemini não está disponível",
    "enabled": true,
    "sequential": true,
    "strict_validation": true,
    "steps": [
      {
        "id": 1,
        "field": "full_name",
        "question": "Qual é o seu nome completo?",
        "validation": {
          "min_length": 2,
          "required": true,
          "type": "name"
        },
        "error_message": "Por favor, informe seu nome completo."
      },
      {
        "id": 2,
        "field": "area_of_law",
        "question": "Em qual área do direito você precisa de ajuda?\n\n• Penal\n• Civil\n• Trabalhista\n• Família\n• Empresarial",
        "validation": {
          "min_length": 3,
          "required": true,
          "type": "area",
          "normalize_map": {
            "penal": "Penal",
            "criminal": "Penal",
            "crime": "Penal",
            "civil": "Civil",
            "civel": "Civil",
            "trabalhista": "Trabalhista",
            "trabalho": "Trabalhista",
            "trabalhador": "Trabalhista",
            "família": "Família",
            "familia": "Família",
            "divórcio": "Família",
            "divorcio": "Família",
            "casamento": "Família",
            "empresarial": "Empresarial",
            "empresa": "Empresarial",
            "comercial": "Empresarial"
          }
        },
        "error_message": "Por favor, escolha uma das áreas: Penal, Civil, Trabalhista, Família ou Empresarial."
      },
      {
        "id": 3,
        "field": "description",
        "question": "Descreva brevemente sua situação jurídica.",
        "validation": {
          "min_length": 5,
          "required": true,
          "type": "description"
        },
        "error_message": "Por favor, descreva sua situação com mais detalhes."
      },
      {
        "id": 4,
        "field": "phone",
        "question": "Qual seu número de WhatsApp com DDD? (exemplo: 11999999999)",
        "validation": {
          "min_length": 10,
          "required": true,
          "type": "phone"
        },
        "error_message": "Por favor, digite seu número com DDD (exemplo: 11999999999)."
      }
    ],
    "completion_message": "Obrigado, {full_name}! Suas informações sobre {area_of_law} foram registradas. Nossa equipe entrará em contato no WhatsApp {phone} em breve."
  }
}